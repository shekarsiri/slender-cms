
<?php //  Web site Title --}} ?><?php \Laravel\Section::start('title'); ?>
@parent
:: Account
<?php \Laravel\Section::stop(); ?>

<?php //  New Laravel 4 Feature in use --}} ?><?php \Laravel\Section::start('styles'); ?>
@parent
body {
	background: #f2f2f2;
}
<?php \Laravel\Section::stop(); ?>

<?php //  Content --}} ?><?php \Laravel\Section::start('content'); ?>
<div class="page-header">
	<h1>Edit your settings</h1>
</div>
<form method="post" action="" class="form-horizontal">
	<!-- First Name -->
	<div class="control-group <?php echo  $errors->has('first_name') ? 'error' : '' ; ?>">
		<label class="control-label" for="first_name">First Name</label>
		<div class="controls">
			<input type="text" name="first_name" id="first_name" value="<?php echo   Input::old('first_name', $user->first_name) ; ?>" />
			<?php echo  $errors->first('first_name') ; ?>
		</div>
	</div>
	<!-- ./ first name -->

	<!-- Last Name -->
	<div class="control-group <?php echo  $errors->has('last_name') ? 'error' : '' ; ?>">
		<label class="control-label" for="last_name">Last Name</label>
		<div class="controls">
			<input type="text" name="last_name" id="last_name" value="<?php echo  Input::old('last_name', $user->last_name) ; ?>" />
			<?php echo  $errors->first('last_name') ; ?>
		</div>
	</div>
	<!-- ./ last name -->

	<!-- Email -->
	<div class="control-group <?php echo  $errors->has('email') ? 'error' : '' ; ?>">
		<label class="control-label" for="email">Email</label>
		<div class="controls">
			<input type="text" name="email" id="email" value="<?php echo  Input::old('email', $user->email) ; ?>" />
			<?php echo  $errors->first('email') ; ?>
		</div>
	</div>
	<!-- ./ email -->

	<!-- Password -->
	<div class="control-group <?php echo  $errors->has('password') ? 'error' : '' ; ?>">
		<label class="control-label" for="password">Password</label>
		<div class="controls">
			<input type="password" name="password" id="password" value="" />
			<?php echo  $errors->first('password') ; ?>
		</div>
	</div>
	<!-- ./ password -->

	<!-- Password Confirm -->
	<div class="control-group <?php echo  $errors->has('password_confirmation') ? 'error' : '' ; ?>">
		<label class="control-label" for="password_confirmation">Password Confirm</label>
		<div class="controls">
			<input type="password" name="password_confirmation" id="password_confirmation" value="" />
			<?php echo  $errors->first('password_confirmation') ; ?>
		</div>
	</div>
	<!-- ./ password confirm -->



<?php if ($user->has_access("user.view")): ?> 


	<!-- permissions -->
	<div class="control-group">
		<label class="control-label">Permissions</label>
		<div class="controls">
			
			<label class="checkbox inline">
			  <input type="checkbox" onclick="$('input.access_view').prop('checked', $(this).prop('checked'));"> All
			</label>
			<label class="checkbox inline">
			  <input type="checkbox" onclick="$('input.access_edit').prop('checked', $(this).prop('checked'));"> All
			</label>
			<label class="checkbox inline">
			  <input type="checkbox" onclick="$('input.access_delete').prop('checked', $(this).prop('checked'));"> All
			</label>

		</div>
	</div>
	<!-- ./ permissions -->

<?php if (Auth::user()->has_access("user.edit") || Auth::user()->has_access("user.view")): ?>
	<!-- permissions -->
	<div class="control-group">
		<label class="control-label">User</label>
		<div class="controls">
			<label class="checkbox inline">
			  <input type="checkbox" name="access[user][view]" class='access_view' <?php if ($user->has_access("user.view")): ?> checked <?php endif; ?> value="1"> View
			</label>
			<label class="checkbox inline">
			  <input type="checkbox" name="access[user][edit]"  class='access_edit' <?php if ($user->has_access("user.edit")): ?> checked <?php endif; ?> value="1"> Edit
			</label>
			<label class="checkbox inline">
			  <input type="checkbox" name="access[user][delete]"  class='access_delete' <?php if ($user->has_access("user.delete")): ?> checked <?php endif; ?> value="1"> Delete
			</label>

		</div>
	</div>
	<!-- ./ permissions -->
<?php endif; ?>	
	
<?php foreach (Config::get('tv4.modules') as $module => $conf): ?>
	<!-- permissions -->
	<div class="control-group">
		<label class="control-label"><?php echo  ucfirst($module) ; ?></label>
		<div class="controls">
			<label class="checkbox inline">
			  <input type="checkbox" name="access[<?php echo  $module ; ?>][view]" class='access_view' <?php if ($user->has_access("{$module}.view")): ?> checked <?php endif; ?> value="1"> View
			</label>
			<label class="checkbox inline">
			  <input type="checkbox" name="access[<?php echo  $module ; ?>][edit]"  class='access_edit' <?php if ($user->has_access("{$module}.edit")): ?> checked <?php endif; ?> value="1"> Edit
			</label>
			<label class="checkbox inline">
			  <input type="checkbox" name="access[<?php echo  $module ; ?>][delete]"  class='access_delete' <?php if ($user->has_access("{$module}.delete")): ?> checked <?php endif; ?> value="1"> Delete
			</label>

		</div>
	</div>
	<!-- ./ permissions -->
<?php endforeach; ?>

<?php endif; ?>

	<!-- Update button -->
	<div class="control-group">
		<div class="controls">
			<button type="submit" class="btn">Update</button>
		</div>
	</div>
	<!-- ./ update button -->
</form>
<?php \Laravel\Section::stop(); ?>

<?php echo view('layouts.default')->with(get_defined_vars())->render(); ?>